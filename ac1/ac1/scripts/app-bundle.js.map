{"version":3,"sources":["app.ts","environment.ts","main.ts","resources/index.ts","components/timeline/timeline-component.ts","components/timeline/timelineTask.ts"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["import * as moment from 'moment';\nimport TimelineTask = require(\"./components/timeline/timelineTask\");\n\nexport class App {\n\n    public timelineGroups: Array<TimelineTask.TimelineGroup>;\n\n    constructor() {\n        this.createData();\n    }\n\n    public createData() {\n         this.timelineGroups=new Array<TimelineTask.TimelineGroup>();\n\n        var tl1 = new TimelineTask.TimelineGroup();\n        tl1.name = \"Production1\";\n        tl1.addTask(moment('2017-03-01 00:00:00'),moment('2017-03-01 02:30:00'), \"Running Printing\");\n        tl1.addTask(moment('2017-03-01 02:30:00'),moment('2017-03-01 05:15:00'), \"Stop 125\");\n        this.timelineGroups.push(tl1);\n\n        var tl2 = new TimelineTask.TimelineGroup();\n        tl2.name = \"Changeover\";\n        tl2.addTask(moment('2017-03-01 05:15:00'),moment('2017-03-01 06:00:00'), \"Start\");\n        tl2.addTask(moment('2017-03-01 06:00:00'),moment('2017-03-01 06:45:00'), \"Cleaning\");\n        tl2.addTask(moment('2017-03-01 06:45:00'),moment('2017-03-01 07:15:00'), \"End\");\n        this.timelineGroups.push(tl2);\n     \n        var tl3 = new TimelineTask.TimelineGroup();\n        tl3.name = \"Production2\";\n        tl3.addTask(moment('2017-03-01 07:15:00'),moment('2017-03-01 08:30:00'), \"Running Printing\");\n        tl3.addTask(moment('2017-03-01 08:30:00'),moment('2017-03-01 12:15:00'), \"Stop 456\");\n        this.timelineGroups.push(tl3);\n\n    }\n\n\n    attached() {\n      \n    }\n\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import 'bootstrap';\nimport {Aurelia} from 'aurelia-framework'\nimport environment from './environment';\n\n//Configure Bluebird Promises.\n(<any>Promise).config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia: Aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {FrameworkConfiguration} from 'aurelia-framework';\n\nexport function configure(config: FrameworkConfiguration) {\n  //config.globalResources([]);\n}\n","import { bindable, autoinject } from 'aurelia-framework';\r\nimport * as moment from \"moment\";\r\nimport * as d3 from 'd3'\r\nimport TimelineTask = require(\"./timelineTask\");\r\n\r\n@autoinject\r\n\r\nexport class TimelineComponent {\r\n    @bindable timelineGroups: Array<TimelineTask.TimelineGroup>;\r\n    @bindable timelineId: string;\r\n    @bindable row: number;\r\n\r\n    public timelineWidth: number;\r\n    public timelineHeight: number;\r\n    public groupHeight: number;\r\n    public detailHeight: number;\r\n\r\n    public startDate: moment.Moment;\r\n    public endDate: moment.Moment;\r\n\r\n    constructor() {\r\n\r\n        this.timelineWidth = 1500;\r\n        this.timelineHeight = 80;\r\n        this.groupHeight = 0.3;\r\n        this.detailHeight = 0.7;\r\n\r\n        this.startDate = moment('2017-03-01 00:00:00');\r\n        this.endDate = moment('2017-03-02 00:00:00');\r\n    }\r\n\r\n\r\n    created(view) {\r\n\r\n    }\r\n\r\n    bind(bindingContext, overrideContext) {\r\n\r\n    }\r\n\r\n    unbind() {\r\n\r\n    }\r\n\r\n    attached() {\r\n        this.createD3();\r\n    }\r\n\r\n    public createD3() {\r\n        var dataTasks = [];\r\n\r\n        \r\n        for (let tlg of this.timelineGroups) {\r\n\r\n           \r\n            dataTasks.push({\r\n\r\n                xPos: +tlg.start.format('X'),\r\n                yPos: 0,\r\n                height: this.groupHeight,\r\n                stopcode: 1,\r\n                name: tlg.name,\r\n                width: +tlg.end.format('X')-+tlg.start.format('X'),\r\n            });\r\n\r\n            for (let tlt of tlg.tasks) {\r\n\r\n\r\n               \r\n\r\n                dataTasks.push({\r\n\r\n                    xPos: +tlt.start.format('X'),\r\n                    yPos: this.groupHeight,\r\n                    height: this.detailHeight,\r\n                    stopcode: 1,\r\n                    name: tlt.name,\r\n                    width: +tlt.end.format('X')-+tlt.start.format('X'),\r\n                });\r\n            }\r\n        }\r\n\r\n\r\n        console.log(dataTasks);\r\n\r\n        var scaleX = d3.scaleLinear()\r\n                    .domain([+this.startDate.format('X'),+this.endDate.format('X')])\r\n                    .range([0,this.timelineWidth]);\r\n        \r\n        var scaleW = d3.scaleLinear()\r\n                    .domain([0,+this.endDate.format('X')-+this.startDate.format('X')])\r\n                    .range([0,this.timelineWidth]);\r\n\r\n        var scaleY = d3.scaleLinear()\r\n                    .domain([0,1])\r\n                    .range([0,this.timelineHeight]);\r\n\r\n        var svg = d3.select('#' + this.timelineId);\r\n\r\n        svg.selectAll(\"rect\")\r\n            .data(dataTasks)\r\n            .enter()\r\n            .append(\"rect\")\r\n                .attr('y', (dg) => scaleY(dg.yPos))\r\n                .attr('x', (dg) => scaleX(dg.xPos))\r\n                .attr('width', (dg) => scaleW(dg.width))\r\n                .attr('height', (dg) => scaleY(dg.height))\r\n                .attr('fill','yellow')\r\n                .attr('style', 'stroke-width:1;stroke:rgb(0,0,0)');\r\n\r\n        svg.selectAll(\"text\")\r\n            .data(dataTasks)\r\n            .enter()\r\n            .append(\"text\")\r\n            .text((d)=>d.name)\r\n            .attr('text-anchor','middle')\r\n            .attr('x',(dg) => scaleX(dg.xPos + dg.width/2))\r\n            .attr('y',(dg) => scaleY(dg.yPos+dg.height/2));\r\n\r\n        // .selectAll(\"g\")\r\n        //     .data(dataTasks)\r\n        //     .enter()\r\n        //     .append('g')\r\n        // .append(\"rect\")\r\n        //     .attr('y', (d) => d.yPos * 40)\r\n        //     .attr('x', (d) => d.xPos)\r\n        //     .attr('width', (d) => d.duration)\r\n        //     .attr('height', 20)\r\n        //     .attr('style', 'fill:rgb(125,0,255);stroke-width:1;stroke:rgb(0,0,0)');\r\n    }\r\n\r\n    detached() {\r\n\r\n    }\r\n}\r\n","import * as moment from \"moment\";\r\n\r\nexport class TimelineGroup {\r\n    name: string;\r\n    color: string;\r\n\r\n    start: moment.Moment;\r\n    end: moment.Moment;\r\n    tasks: Array<TimelineTask>;\r\n\r\n    constructor() {\r\n        this.tasks=new Array<TimelineTask>();\r\n    }\r\n\r\n    public addTask(start: moment.Moment,end: moment.Moment,name: string)\r\n    {\r\n        var task = new TimelineTask();\r\n\r\n        task.start = start;\r\n        task.end = end;\r\n        task.name = name;\r\n        \r\n        this.tasks.push(task);\r\n\r\n        if (!this.start) this.start = start;\r\n        if (!this.end) this.end = end;\r\n\r\n        if (this.start>start) this.start = start;\r\n        if (this.end<end) this.end = end;\r\n    }\r\n}\r\n\r\nexport class TimelineTask {\r\n\r\n    start: moment.Moment;\r\n    end: moment.Moment;\r\n    content: string;\r\n    status: string;\r\n    category: string;\r\n    name: string;\r\n\r\n    color: string;\r\n    \r\n\r\n    constructor() {\r\n\r\n    }\r\n\r\n    \r\n\r\n\r\n}"],"sourceRoot":".."}